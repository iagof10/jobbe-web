@{
    ViewData["Title"] = "Home Page";
}

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-br" data-footer="true">
<head data-color="dark-red">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Jobbe</title>
    <meta name="description" content="Home screen that contains stats, charts, call to action buttons and various listing elements." />
    <!-- Favicon Tags Start -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../img/logo/icon_sol.png" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-square70x70logo" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-square150x150logo" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-wide310x150logo" content="../img/logo/icon_sol.pngg" />
    <meta name="msapplication-square310x310logo" content="../img/logo/icon_sol.png" />
    <!-- Favicon Tags End -->
    <!-- Font Tags Start -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../font/CS-Interface/style.css" />
    <!-- Font Tags End -->
    <!-- Vendor Styles Start -->
    <link rel="stylesheet" href="../css/vendor/bootstrap.min.css" />

    <link rel="stylesheet" href="../css/vendor/OverlayScrollbars.min.css" />

    <link rel="stylesheet" href="../css/vendor/glide.core.min.css" />

    <link rel="stylesheet" href="../css/vendor/introjs.min.css" />

    <link rel="stylesheet" href="../css/vendor/select2.min.css" />

    <link rel="stylesheet" href="../css/vendor/select2-bootstrap4.min.css" />

    <link rel="stylesheet" href="../css/vendor/plyr.css" />

    <link rel="stylesheet" href="../css/vendor/baguetteBox.min.css" />

    <link rel="stylesheet" href="../css/vendor/select2.min.css" />

    <link rel="stylesheet" href="../css/vendor/select2-bootstrap4.min.css" />

    <!-- Vendor Styles End -->
    <!-- Template Base Styles Start -->
    <link rel="stylesheet" href="../css/styles.css" />
    <!-- Template Base Styles End -->

    <link rel="stylesheet" href="../css/main.css" />
    <script src="../js/base/loader.js"></script>
    <script src="../js/site.js"></script>

</head>

<body>
    <div id="root">

        <div id="nav" class="nav-container d-flex">
            <div class="nav-content d-flex">
                <!-- Logo Start -->
                <div>
                    <div>
                        <a href="/">
                            <div style="display: flex; justify-content: center; align-items: center;">
                                <img style="height: 5vh" src="../img/logo/icon_sol.png" />
                            </div>
                        </a>
                    </div>
                </div>
                <!-- Logo End -->
                <!-- Menu Start -->
                <div class="menu-container flex-grow-1">
                    <ul style="float: right" id="menu" class="menu">
                        <li>
                            <a style="color: #d44f4f" href="Sign/Sign">
                                <i data-cs-icon="info-hexagon" class="icon" data-cs-size="18"></i>
                                <span class="label">Saiba Mais</span>
                            </a>
                        </li>
                        <li>
                            <a style="color: #d44f4f" href="Sign/Sign">
                                <i data-cs-icon="login" class="icon" data-cs-size="18"></i>
                                <span class="label">Entrar</span>
                            </a>
                        </li>
                        <li>
                            <a style="color: #d44f4f" href="Register/Register">
                                <i data-cs-icon="user" class="icon" data-cs-size="18"></i>
                                <span class="label">Cadastre-se</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- Menu End -->
                <!-- Mobile Buttons Start -->
                <div class="mobile-buttons-container">
                    <!-- Menu Button Start -->
                    <a href="#" id="mobileMenuButton" class="menu-button">
                        <i style="color: #c54949" data-cs-icon="menu"></i>
                    </a>
                    <!-- Menu Button End -->
                </div>
                <!-- Mobile Buttons End -->
            </div>
            <div class="nav-shadow"></div>
        </div>

        <main>
            <div class="container">

                <div>

                    @*                    <!-- Center Start -->
                        <section class="scroll-section" id="center">
                        <div class="row">
                        <div class="col-12 mb-5">
                        <div class="glide" id="glideCenter">
                        <div class="glide__track" data-glide-el="track">
                        <div class="glide__slides">
                        <div class="glide__slide">
                        <div class="card">
                        <img src="img/product/small/product-10.webp" class="card-img-top" alt="card image" />
                        <div class="card-body">
                        <h5 class="card-title">Card title 1</h5>
                        <p class="card-text">Liquorice caramels apple pie chupa.</p>
                        </div>
                        </div>
                        </div>
                        <div class="glide__slide">
                        <div class="card">
                        <img src="img/product/small/product-10.webp" class="card-img-top" alt="card image" />
                        <div class="card-body">
                        <h5 class="card-title">Card title 2</h5>
                        <p class="card-text">Liquorice caramels apple pie chupa.</p>
                        </div>
                        </div>
                        </div>
                        <div class="glide__slide">
                        <div class="card">
                        <img src="img/product/small/product-10.webp" class="card-img-top" alt="card image" />
                        <div class="card-body">
                        <h5 class="card-title">Card title 3</h5>
                        <p class="card-text">Liquorice caramels apple pie chupa.</p>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </section>*@

                    <!-- Center End -->
                    <!-- Auto Play Start -->
                    <section class="scroll-section" id="autoPlay" style="margin-top: 10px;">
                        <div class="row gx-2">
                            <div class="mb-4">
                                <div class="glide" id="glideAuto">
                                    <div class="glide__track" data-glide-el="track">
                                        <div class="glide__slides">

                                            <div class="glide__slide">
                                                <div>
                                                    <div class="card w-100 sh-18 sh-md-22 hover-img-scale-up">
                                                        <img src="img/banner/cta-standard-2.webp" class="card-img h-100 scale" alt="card image" />
                                                        <div class="card-img-overlay d-flex flex-column justify-content-between bg-transparent">
                                                            <div class="d-flex flex-column h-100 justify-content-between align-items-start">
                                                                <div class="cta-3 text-black">
                                                                    Basic Principles 1
                                                                    <br />
                                                                    of Cooking
                                                                </div>
                                                                <a href="Pages.Blog.List.html" class="btn btn-icon btn-icon-start btn-primary stretched-link">
                                                                    <i data-cs-icon="chevron-right"></i>
                                                                    <span>View</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="glide__slide">
                                                <div>
                                                    <div class="card w-100 sh-18 sh-md-22 hover-img-scale-up">
                                                        <img src="img/banner/cta-standard-2.webp" class="card-img h-100 scale" alt="card image" />
                                                        <div class="card-img-overlay d-flex flex-column justify-content-between bg-transparent">
                                                            <div class="d-flex flex-column h-100 justify-content-between align-items-start">
                                                                <div class="cta-3 text-black">
                                                                    Basic Principles 2
                                                                    <br />
                                                                    of Cooking
                                                                </div>
                                                                <a href="Pages.Blog.List.html" class="btn btn-icon btn-icon-start btn-primary stretched-link">
                                                                    <i data-cs-icon="chevron-right"></i>
                                                                    <span>View</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="glide__slide">
                                                <div>
                                                    <div class="card w-100 sh-18 sh-md-22 hover-img-scale-up">
                                                        <img src="img/banner/cta-standard-2.webp" class="card-img h-100 scale" alt="card image" />
                                                        <div class="card-img-overlay d-flex flex-column justify-content-between bg-transparent">
                                                            <div class="d-flex flex-column h-100 justify-content-between align-items-start">
                                                                <div class="cta-3 text-black">
                                                                    Basic Principles 3
                                                                    <br />
                                                                    of Cooking
                                                                </div>
                                                                <a href="Pages.Blog.List.html" class="btn btn-icon btn-icon-start btn-primary stretched-link">
                                                                    <i data-cs-icon="chevron-right"></i>
                                                                    <span>View</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="glide__slide">
                                                <div>
                                                    <div class="card w-100 sh-18 sh-md-22 hover-img-scale-up">
                                                        <img src="img/banner/cta-standard-3.webp" class="card-img h-100 scale" alt="card image" />
                                                        <div class="card-img-overlay d-flex flex-column justify-content-between bg-transparent">
                                                            <div class="d-flex flex-column h-100 justify-content-between align-items-start">
                                                                <div class="cta-3 text-black">
                                                                    Easy & Practical 4
                                                                    <br />
                                                                    Recipes
                                                                </div>
                                                                <a href="Pages.Blog.List.html" class="btn btn-icon btn-icon-start btn-primary stretched-link">
                                                                    <i data-cs-icon="chevron-right"></i>
                                                                    <span>View</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="glide__slide">
                                                <div>
                                                    <div class="card w-100 sh-18 sh-md-22 hover-img-scale-up">
                                                        <img src="img/banner/cta-standard-2.webp" class="card-img h-100 scale" alt="card image" />
                                                        <div class="card-img-overlay d-flex flex-column justify-content-between bg-transparent">
                                                            <div class="d-flex flex-column h-100 justify-content-between align-items-start">
                                                                <div class="cta-3 text-black">
                                                                    Basic Principles 5
                                                                    <br />
                                                                    of Cooking
                                                                </div>
                                                                <a href="Pages.Blog.List.html" class="btn btn-icon btn-icon-start btn-primary stretched-link">
                                                                    <i data-cs-icon="chevron-right"></i>
                                                                    <span>View</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Auto Play End -->

                </div>

                <!-- Help Start -->
                <div class="col-12 mb-5">
                    <div class="card h-100-card">
                        <div class="card-body">
                            <div id="txt1" class="cta-4">Precisa de um serviço?</div>
                            <div id="txt2" class="mb-3 cta-4 text-primary">Procure o prestador(a) ideal pra você!</div>
                            <form>
                                <div class="mb-3 filled w-100">
                                    <i data-cs-icon="diagram-1"></i>
                                    <select onchange="AlterarSubcategoriaFromCategoria()" class="ListaCategoria" id="select2Basic" data-placeholder="Categorias">
                                        <option label="&nbsp;"></option>
                                    </select>
                                </div>

                                <div class="mb-4 filled w-100">
                                    <i data-cs-icon="diagram-1"></i>
                                    <select class="ListaSubCategoria" multiple="multiple" data-placeholder="Sub-Categorias" data-tags="true" data-close-on-select="false" id="selectDataApi">
                                        <option label="&nbsp;"></option>
                                    </select>
                                </div>
                                <div class="mb-3 filled w-100">
                                    <div  id="txt3" class="cta-4">Adicione sua localização,</div>
                                    <div  id="txt4" class="mb-3 cta-4 text-primary">buscaremos os prestadores que atendam sua região!</div>
                                </div>

                                <div class="mb-3 filled w-100">
                                    <div class="d-flex align-items-center mb-2">
                                        <a id="btnLocalizacao" style="margin-right: 0.25vw" class="btn btn-outline-primary mb-1" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                                            Usar localização
                                        </a>
                                        <a id="btnEndereco" style="margin-left: 0.25vw" class="btn btn-outline-primary mb-1" data-bs-toggle="collapse" href="#collapseExample2" role="button" aria-expanded="false" aria-controls="collapseExample2">
                                            Digitar Endereço
                                        </a>
                                    </div>

                                    <div class="collapse" id="collapseExample">
                                        <div class="card card-body no-shadow border mt-3">
                                            Usaremos sua localização para buscar os prestadores que atendem sua região, não esqueça  de permitir que o Jobbe acesse sua localização.
                                        </div>
                                    </div>

                                    <div class="collapse" id="collapseExample2">
                                        <br/>
                                        <label class="mb-3 top-label">
                                            <input id="cepLocalizacao" class="form-control" />
                                            <span>CEP</span>
                                        </label>
                                    </div>

                                </div>
                                <a style="width:100%" id="btnBuscarPrestador" class="btn btn-icon btn-icon-start btn-primary mt-3">
                                    <i data-cs-icon="search"></i>
                                    <span>Buscar</span>
                                </a>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Right Side Start -->
                <div class="container">
                    <!-- Title Tabs Start -->
                    <ul class="nav nav-tabs nav-tabs-title nav-tabs-line-title responsive-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" data-bs-toggle="tab" href="#prestadoresTab" role="tab" aria-selected="true">Prestadores</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" data-bs-toggle="tab" href="#feedTab" role="tab" aria-selected="false">Feed</a>
                        </li>
                        <li class="nav-item dropdown ms-auto d-none responsive-tab-dropdown">
                            <a class="btn btn-icon btn-icon-only btn-background pt-0"
                               href="#"
                               role="button"
                               data-bs-toggle="dropdown"
                               aria-haspopup="true"
                               aria-expanded="false"
                               data-diplay="static">
                                <i data-cs-icon="more-horizontal"></i>
                            </a>
                            <ul class="dropdown-menu mt-2 dropdown-menu-end"></ul>
                        </li>
                    </ul>
                    <!-- Title Tabs End -->

                    <div class="tab-content">

                        <!-- Prestadores Tab Start -->
                        <div class="tab-pane fade active show" id="prestadoresTab" role="tabpanel">

                            <br />

                            <!-- List Start -->
                            <div id="listaPrestador" class="row row-cols-1 row-cols-sm-2 row-cols-xl-3 row-cols-xxl-4 g-3 mb-5">

                                <!-- List End -->
                                <!-- Content End -->
                            </div>

                        </div>
                        <!-- Prestadores Tab End -->
                        <!-- Feed Tab Start -->
                        <div class="tab-pane fade" id="feedTab" role="tabpanel">

                            <br />

                            <div id="listaPulicacoes" class="row row-cols-1 row-cols-sm-2 row-cols-xl-3 row-cols-xxl-3 g-3 mb-5">
                            </div>
                        </div>
                        <!-- Feed Tab End -->

                    </div>
                </div>
                <!-- Right Side End -->
            </div>
        </main>

    </div>
    <!-- Theme Settings Modal Start -->
    <div class="modal fade modal-right scroll-out-negative"
         id="settings"
         data-bs-backdrop="true"
         tabindex="-1"
         role="dialog"
         aria-labelledby="settings"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable full" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Selecione sua preferência</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <div class="scroll-track-visible">
                        <div class="mb-5" id="color">
                            <label class="mb-3 d-inline-block form-label">Tema</label>

                            <div class="row d-flex g-3 justify-content-between flex-wrap mb-3">
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="light-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-light"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Claro</span>
                                    </div>
                                </a>
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="dark-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-dark"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Escuro</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Theme Settings Modal End -->
    <!-- Theme Settings & Niches Buttons Start -->
    <div class="settings-buttons-container">
        <button type="button" class="btn settings-button btn-primary p-0" data-bs-toggle="modal" data-bs-target="#settings" id="settingsButton">
            <span class="d-inline-block no-delay" data-bs-delay="0" data-bs-offset="0,3" data-bs-toggle="tooltip" data-bs-placement="left" title="Settings">
                <i data-cs-icon="paint-roller" class="position-relative"></i>
            </span>
        </button>
    </div>
    <!-- Theme Settings & Niches Buttons End -->

    <script>

        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
            document.getElementById("txt1").classList.remove("cta-4")
            document.getElementById("txt1").classList.add("cta-5")
            
            document.getElementById("txt2").classList.remove("cta-4")
            document.getElementById("txt2").classList.add("cta-5") 

            document.getElementById("txt3").classList.remove("cta-4")
            document.getElementById("txt3").classList.add("cta-5") 

            document.getElementById("txt4").classList.remove("cta-4")
            document.getElementById("txt4").classList.add("cta-5") 
        }

        var latitude = 0
        var longitude = 0
        var subCategoriasSelecionadas = []
        var categoriaSelecionada = 0
        var btnLocalizacaoIsOpen = false
        var btnEnderecoIsOpen = false
        var btnClicked = false

        GetPrestadores()
        GetPublicacoess()
        GetCategoria()
        GetSubCategoria()

        document.getElementById("btnLocalizacao").addEventListener("click", selectFiltroLocalizacao, false);

        function selectFiltroLocalizacao() {

            console.log("teste1")

            if(btnLocalizacaoIsOpen){
                document.getElementById("btnLocalizacao").classList.remove("btn-primary")
                document.getElementById("btnLocalizacao").classList.add("btn-outline-primary")
                latitude = 0
                longitude = 0
                btnLocalizacaoIsOpen = false;
            }else{
                document.getElementById("btnLocalizacao").classList.remove("btn-outline-primary")
                document.getElementById("btnLocalizacao").classList.add("btn-primary")
                GetLocationOnly()
                btnLocalizacaoIsOpen = true;
            }

            if(!btnClicked){
                if(btnEnderecoIsOpen){
                    btnClicked = true;
                    document.getElementById("btnEndereco").click();
                }else{
                    btnClicked = false;
                }
            }else{
                btnClicked = false;
            }
        }

        document.getElementById("btnEndereco").addEventListener("click", selectFiltroEndereco, false);

        function selectFiltroEndereco() {

            console.log("teste2")

            if(btnEnderecoIsOpen){
                document.getElementById("btnEndereco").classList.remove("btn-primary")
                document.getElementById("btnEndereco").classList.add("btn-outline-primary")
                latitude = 0
                longitude = 0
                document.getElementById("cepLocalizacao").value = ''
                btnEnderecoIsOpen = false;
            }else{
                document.getElementById("btnEndereco").classList.remove("btn-outline-primary")
                document.getElementById("btnEndereco").classList.add("btn-primary")
                btnEnderecoIsOpen = true;
            }

            if(!btnClicked){
                if(btnLocalizacaoIsOpen){
                    btnClicked = true;
                    document.getElementById("btnLocalizacao").click();
                }else{
                    btnClicked = false;
                }

            }else{
                btnClicked = false;
            }
        }

        function GetPrestadores() {

            var subCategoriasQuery = ''

            for (let i = 0; i < subCategoriasSelecionadas.length; i = i + 1) {
                subCategoriasQuery = subCategoriasQuery + '&SubCategoriaIds=' + subCategoriasSelecionadas[i]
            }

            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/UsuarioPrestador/list?Latitude=' + latitude + '&Longitude=' + longitude + '&CategoriaId=' + categoriaSelecionada + subCategoriasQuery);
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {
                    console.log(this.response)

                    if (this.response.data != null) {

                        for (let i = 0; i < this.response.data.length; i = i + 1) {

                            if(this.response.data[i].mural != null){
                            var html = `
                                        <div class="col">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <div class="sw-13 position-relative mb-3 mx-auto">
                                                        <img src="` + RotaAPI + 'api/UsuarioPrestador/' + this.response.data[i].idFotoPerfil + `" class="img-fluid card" alt="thumb" />
                                                    </div>
                                                    <a href="Instructor.Detail.html" class="body-link">` + this.response.data[i].apelido + `</a>
                                                    <div class="text-muted text-medium mb-2">` + this.response.data[i].categoria.descricao + `</div>
                                                    <div class="mb-3 text-muted sh-7">` + this.response.data[i].mural.descricao + `</div>
                                                    <div class="row g-0 align-items-center mb-1">
                                                        <div class="col-auto">
                                                            <div class="sw-3 sh-4 d-flex justify-content-center align-items-center">
                                                                <i data-cs-icon="image" class="text-primary"></i>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-3">
                                                            <div class="row g-0">
                                                                <div class="col">
                                                                    <div class="sh-4 d-flex align-items-center lh-1-25">Galeria</div>
                                                                </div>
                                                                <div class="col-auto">
                                                                    <div class="sh-4 d-flex align-items-center text-alternate">` + this.response.data[i].numGaleriaItens + `</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row g-0 align-items-center mb-1">
                                                        <div class="col-auto">
                                                            <div class="sw-3 sh-4 d-flex justify-content-center align-items-center">
                                                                <i data-cs-icon="content" class="text-primary"></i>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-3">
                                                            <div class="row g-0">
                                                                <div class="col">
                                                                    <div class="sh-4 d-flex align-items-center lh-1-25">Publicações</div>
                                                                </div>
                                                                <div class="col-auto">
                                                                    <div class="sh-4 d-flex align-items-center text-alternate">` + this.response.data[i].numPublicacoes + `</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row g-0 align-items-center mb-4">
                                                        <div class="col-auto">
                                                            <div class="sw-3 sh-4 d-flex justify-content-center align-items-center">
                                                                <i data-cs-icon="eye" class="text-primary"></i>
                                                            </div>
                                                        </div>
                                                        <div class="col ps-3">
                                                            <div class="row g-0">
                                                                <div class="col">
                                                                    <div class="sh-4 d-flex align-items-center lh-1-25">Visualizações</div>
                                                                </div>
                                                                <div class="col-auto">
                                                                    <div class="sh-4 d-flex align-items-center text-alternate">` + this.response.data[i].numVisualizacoes + `</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex flex-row justify-content-between w-100 w-sm-50 w-xl-100">
                                                        <a id="` + this.response.data[i].id + `" href="` + RotaWeb + 'DetalhePerfil/' + this.response.data[i].id + `" class="btn btn-outline-primary w-100 me-1 btn-sm">Ver Perfil</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            `;

                                document.getElementById("listaPrestador").innerHTML += html
                            }
                        }

                        csicons.replace()
                    }
                }
            };

            ajax.send();
        }


        function GetPublicacoess() {
            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/Publicacao/list');
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {
                    console.log(this.response)

                    if (this.response.data != null) {

                        for (let i = 0; i < this.response.data.length; i = i + 1) {
                            var html = `
                                        <div class="col">
                                          <div class="card mb-5">
                                            <a href="Pages.Blog.Detail.html">
                                              <img style="min-height: 70vh;" src="` + RotaAPI + 'api/Publicacao/' + this.response.data[i].urlMidia + `" class="card-img-top sh-35" alt="card image" />
                                            </a>
                                            <div class="card-body">
                                              <p class="text-alternate clamp-line mb-0" data-line="2">
                                                ` + this.response.data[i].descricao + `
                                              </p>
                                            </div>
                                            <div class="card-footer border-0 pt-0">
                                              <div class="row align-items-center">
                                                <div class="col-6">
                                                  <div class="d-flex align-items-center">
                                                    <div class="sw-5 d-inline-block position-relative me-3">
                                                      <img src="img/profile/profile-1.webp" class="img-fluid rounded-xl" alt="thumb" />
                                                    </div>
                                                    <div class="d-inline-block">
                                                      <a href="#">` + this.response.data[i].usuario.apelido + `</a>
                                                      <div class="text-muted text-small">` + this.response.data[i].usuario.categoria.name + `</div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="col-6 text-muted">
                                                  <div class="row g-0 justify-content-end">
                                                    <div class="col-auto pe-3">
                                                      <i data-cs-icon="eye" class="text-primary me-1" data-cs-size="15"></i>
                                                      <span class="align-middle"></span>
                                                    </div>
                                                    <div class="col-auto">
                                                      <i data-cs-icon="message" class="text-primary me-1" data-cs-size="15"></i>
                                                      <span class="align-middle"></span>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                       </div>
                                          `;

                            document.getElementById("listaPulicacoes").innerHTML += html
                        }

                    }
                }
            };

            ajax.send();
        }

        function BuscarPorCep() {

            var cep = document.getElementById("cepLocalizacao").value

            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/EnderecoBase/' + cep);
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {
                    latitude = this.response.data.latitude
                    longitude = this.response.data.longitude
                    console.log(latitude)
                    console.log(longitude)
                    GetPrestadores()
                }
            };

            ajax.send();
        }

        function GetCategoria() {

            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/Categoria');
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {

                    categorias = this.response.data

                    var select = document.getElementsByClassName("ListaCategoria")[0]

                    for (let i = 0; i < categorias.length; i = i + 1) {
                        var opt0 = document.createElement("option");
                        opt0.value = categorias[i].id;
                        opt0.text = categorias[i].name;
                        select.add(opt0, select.options[i + 1]);

                    }
                }
            };

            ajax.send();
        }

        function GetSubCategoria() {

            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/SubCategoria/geral');
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {

                    subCategorias = this.response.data

                    var select = document.getElementsByClassName("ListaSubCategoria")[0]

                    for (let i = 0; i < subCategorias.length; i = i + 1) {
                        var opt0 = document.createElement("option");
                        opt0.value = subCategorias[i].id;
                        opt0.text = subCategorias[i].name;
                        select.add(opt0, select.options[i + 1]);
                    }
                }
            };

            ajax.send();
        }

        function removeOptions(selectElement) {
            var i, L = selectElement.options.length - 1;
            for(i = L; i >= 0; i--) {
                selectElement.remove(i);
            }
        }

        function AlterarSubcategoriaFromCategoria() {

            var select = document.getElementsByClassName("ListaCategoria")[0]
            var valueCategoria = select.options[select.selectedIndex].value;
            var textCategoria = select.options[select.selectedIndex].text;

            var selectSubCategoria = document.getElementsByClassName("ListaSubCategoria")[0]
            removeOptions(selectSubCategoria)

            const ajax = new XMLHttpRequest();
            ajax.open('GET', RotaAPI + 'api/SubCategoria?idCategoria=' + valueCategoria);
            ajax.responseType = 'json';
            ajax.onload = function (e) {
                if (this.status == 200) {

                    subCategorias = this.response.data

                    for (let i = 0; i < subCategorias.length; i = i + 1) {
                        var opt0 = document.createElement("option");
                        opt0.value = subCategorias[i].id;
                        opt0.text = subCategorias[i].name;
                        selectSubCategoria.add(opt0, selectSubCategoria.options[i + 1]);
                    }
                }
            };

            ajax.send();
        }

        document.getElementById("btnBuscarPrestador").addEventListener("click", BuscarPrestadorFiltro, false);

        function BuscarPrestadorFiltro() {

            var select = document.getElementsByClassName("ListaCategoria")[0]
            var valueCategoria = select.options[select.selectedIndex].value;
            categoriaSelecionada = valueCategoria
            console.log("Categoria: " + categoriaSelecionada)

            var selectSubCategoria = document.getElementsByClassName("select2-selection__choice")

            subCategoriasSelecionadas = []

            for (let i = 0; i < selectSubCategoria.length; i = i + 1) {
                for (let x = 0; x < subCategorias.length; x = x + 1) {
                    if(subCategorias[x].name == selectSubCategoria[i].title){
                        subCategoriasSelecionadas.push(subCategorias[x].id)
                    }
                }
            }

            document.getElementById("listaPrestador").innerHTML = ''

            if(btnEnderecoIsOpen){
                BuscarPorCep()
            }else{
                GetPrestadores()
            }
        }

        function GetLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(savePosition, GetPrestadores);
            }
            else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function savePosition(position) {
              latitude = position.coords.latitude
              longitude = position.coords.longitude
              console.log("Lat: " + latitude)
              console.log("Long: " + longitude)
              GetPrestadores()
        }

        document.getElementById("btnUsarLocalizacao").addEventListener("click", GetLocationOnly, false);

        function GetLocationOnly() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(savePositionOnly);
            }
            else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function savePositionOnly(position) {
              latitude = position.coords.latitude
              longitude = position.coords.longitude
        }

        function selectPrestador(idUsuario) {

            window.location.replace(RotaWeb + 'DetalhePerfil/' + idUsuario);
        }

    </script>

    <!-- Vendor Scripts Start -->
    <script src="../js/vendor/jquery-3.5.1.min.js"></script>
    <script src="../js/vendor/bootstrap.bundle.min.js"></script>
    <script src="../js/vendor/OverlayScrollbars.min.js"></script>
    <script src="../js/vendor/autoComplete.min.js"></script>
    <script src="../js/vendor/clamp.min.js"></script>
    <script src="../js/vendor/Chart.bundle.min.js"></script>
    <script src="../js/vendor/chartjs-plugin-datalabels.js"></script>
    <script src="../js/vendor/chartjs-plugin-rounded-bar.min.js"></script>
    <script src="../js/vendor/glide.min.js"></script>
    <script src="../js/vendor/intro.min.js"></script>
    <script src="../js/vendor/select2.full.min.js"></script>
    <script src="../js/vendor/plyr.min.js"></script>
    <script src="../js/forms/controls.select2.js"></script>
    <!-- Vendor Scripts End -->
    <!-- Template Base Scripts Start -->
    <script src="../font/CS-Line/csicons.min.js"></script>
    <script src="../js/base/helpers.js"></script>
    <script src="../js/base/globals.js"></script>
    <script src="../js/base/nav.js"></script>
    <script src="../js/base/search.js"></script>
    <script src="../js/base/settings.js"></script>
    <script src="../js/base/init.js"></script>
    <!-- Template Base Scripts End -->
    <!-- Page Specific Scripts Start -->
    <script src="../js/cs/glide.custom.js"></script>
    <script src="../js/cs/charts.extend.js"></script>
    <script src="../js/pages/dashboard.default.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/scripts.js"></script>
    <script src="../js/forms/controls.rating.js"></script>
    <script src="../js/vendor/jquery.barrating.min.js"></script>
    <!-- Page Specific Scripts End -->
    <script src="js/cs/glide.custom.js"></script>
    <script src="js/plugins/carousels.js"></script>
    <script src="js/common.js"></script>
    <script src="js/scripts.js"></script>
</body>
</html>
