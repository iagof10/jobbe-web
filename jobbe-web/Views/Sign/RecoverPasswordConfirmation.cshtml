@model long

@{
    ViewData["Title"] = "Home Page";
}

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-br" style="height: 100%">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Jobbe</title>
    <meta name="description" content="Login Page" />
    <!-- Favicon Tags Start -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="https://unpkg.com/sweetalert2@7.8.2/dist/sweetalert2.all.js"></script>
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../img/logo/icon_sol.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../img/logo/icon_sol.png" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../img/logo/icon_sol.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-square70x70logo" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-square150x150logo" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-wide310x150logo" content="../img/logo/icon_sol.png" />
    <meta name="msapplication-square310x310logo" content="../img/logo/icon_sol.png" />
    <!-- Favicon Tags End -->
    <!-- Font Tags Start -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../font/CS-Interface/style.css" />
    <!-- Font Tags End -->
    <!-- Vendor Styles Start -->
    <link rel="stylesheet" href="../css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/vendor/OverlayScrollbars.min.css" />

    <!-- Vendor Styles End -->
    <!-- Template Base Styles Start -->
    <link rel="stylesheet" href="../css/styles.css" />
    <!-- Template Base Styles End -->

    <link rel="stylesheet" href="../css/main.css" />
    <script src="../js/base/loader.js"></script>
    <script src="../js/site.js"></script>

    <!-- Vendor Scripts Start -->
    <script src="../js/vendor/jquery-3.5.1.min.js"></script>
    <script src="../js/vendor/bootstrap.bundle.min.js"></script>
    <script src="../js/vendor/OverlayScrollbars.min.js"></script>
    <script src="../js/vendor/autoComplete.min.js"></script>
    <script src="../js/vendor/clamp.min.js"></script>
    <script src="../js/vendor/jquery.validate/jquery.validate.min.js"></script>
    <script src="../js/vendor/jquery.validate/additional-methods.min.js"></script>
    <!-- Vendor Scripts End -->

</head>

<body class="h-100">
    <div id="root" class="h-100">
        <!-- Background Start -->
        <div class="fixed-background"></div>
        <!-- Background End -->

        <div class="container-fluid p-0 h-100 position-relative">
            <div class="row g-0 h-100">
                <!-- Left Side Start -->
                <div class="offset-0 col-12 d-none d-lg-flex offset-md-1 col-lg h-lg-100">
                    <div class="min-h-100 d-flex align-items-center">
                        <div class="w-100 w-lg-75 w-xxl-50">
                            <div>
                                <div class="mb-5">
                                    <h1 class="display-2 text-white">Jobbe</h1>
                                    <h1 class="display-3 text-white">A ponte que conecta pessoas no dia a dia</h1>
                                </div>
                                <p class="h6 text-white lh-1-5 mb-5">
                                    A proposta de democratizar o acesso ao trabalho autônomo é algo que nos move a criar a melhor plataforma digital que o mercado já viu.
                                </p>
                                <div class="mb-5">
                                    <a class="btn btn-lg btn-outline-white" href="index.html">Saiba Mais</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Left Side End -->
                <!-- Right Side Start -->
                <div class="col-12 col-lg-auto h-100 pb-4 px-4 pt-0 p-lg-0">
                    <div class="sw-lg-70 min-h-100 bg-foreground d-flex justify-content-center align-items-center shadow-deep py-5 full-page-content-right-border">
                        <div class="sw-lg-50 px-5">
                            <div class="sh-11">
                                <a href="index.html">
                                    <div style="display: flex; justify-content: center; align-items: center;">
                                        <img style="width: 50%" src="../img/logo/icon_sol.png" />
                                    </div>
                                </a>
                            </div>
                            <div class="mb-5">
                                <h2 class="cta-1 mb-0 text-primary">Pronto!</h2>
                                <h2 class="cta-1 text-primary">Agora você pode recuperar sua senha.</h2>
                            </div>
                            <div class="mb-5">
                                <p class="h6">Insira abaixo sua nova senha, essa será utilizada para login no Jobbe.</p>
                            </div>
                            <div>
                                <div class="mb-3 filled form-group tooltip-end-top">
                                    <i data-cs-icon="lock-off"></i>
                                    <input class="form-control pe-7" name="Nova Senha" id="registerPassword" type="password" placeholder="Nova Senha" />
                                </div>
                                <div class="mb-3 filled form-group tooltip-end-top">
                                    <i data-cs-icon="lock-off"></i>
                                    <input class="form-control pe-7" name="Confirme a Nova Senha" id="registerPasswordConfirmation" type="password" placeholder="Confirme a Nova Senha" />
                                </div>
                                <button id="btnSalvarNovaSenha" type="submit" class="btn btn-lg btn-primary">Salvar nova senha</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Right Side End -->
            </div>
        </div>
    </div>

    <!-- Theme Settings Modal Start -->
    <div class="modal fade modal-right scroll-out-negative"
         id="settings"
         data-bs-backdrop="true"
         tabindex="-1"
         role="dialog"
         aria-labelledby="settings"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable full" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Selecione sua preferência</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <div class="scroll-track-visible">
                        <div class="mb-5" id="color">
                            <label class="mb-3 d-inline-block form-label">Tema</label>

                            <div class="row d-flex g-3 justify-content-between flex-wrap mb-3">
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="light-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-light"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Claro</span>
                                    </div>
                                </a>
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="dark-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-dark"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Escuro</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Theme Settings Modal Start -->
    <div class="modal fade modal-right scroll-out-negative"
         id="settings"
         data-bs-backdrop="true"
         tabindex="-1"
         role="dialog"
         aria-labelledby="settings"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable full" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Selecione sua preferência</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <div class="scroll-track-visible">
                        <div class="mb-5" id="color">
                            <label class="mb-3 d-inline-block form-label">Tema</label>

                            <div class="row d-flex g-3 justify-content-between flex-wrap mb-3">
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="light-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-light"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Claro</span>
                                    </div>
                                </a>
                                <a href="#" class="flex-grow-1 w-50 option col" data-value="dark-red" data-parent="color">
                                    <div class="card rounded-md p-3 mb-1 no-shadow color">
                                        <div class="red-dark"></div>
                                    </div>
                                    <div class="text-muted text-part">
                                        <span class="text-extra-small align-middle">Tema Escuro</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Theme Settings Modal End -->
    <!-- Theme Settings & Niches Buttons Start -->
    <div class="settings-buttons-container">
        <button type="button" class="btn settings-button btn-primary p-0" data-bs-toggle="modal" data-bs-target="#settings" id="settingsButton">
            <span class="d-inline-block no-delay" data-bs-delay="0" data-bs-offset="0,3" data-bs-toggle="tooltip" data-bs-placement="left" title="Settings">
                <i data-cs-icon="paint-roller" class="position-relative"></i>
            </span>
        </button>
    </div>
    <!-- Theme Settings & Niches Buttons End -->
    <script>

        document.getElementById("btnSalvarNovaSenha").addEventListener("click", SalvarNovaSenha, false);

        function SalvarNovaSenha() {
            
            registerPassword = document.getElementById("registerPassword").value
            registerPasswordConfirmation = document.getElementById("registerPasswordConfirmation").value

            if (registerPassword == registerPasswordConfirmation) {

                var ajax = new XMLHttpRequest();
                ajax.open("POST", RotaAPI + "api/UsuarioPrestador/EnviarNovaSenha");
                ajax.setRequestHeader("Content-Type", "application/json");
                ajax.send(JSON.stringify({ senha: registerPassword, codeResetPassword: @Model }));
                ajax.onreadystatechange = function () {

                    if(ajax.readyState == 4){

                        if (ajax.status == 200) {

                            alertSucess()

                        } else {
                            alertErro()
                        }

                    }
                }

            } else {
                errorPasswordConfirmation()
            }
        }

        function alertSucess() {
            swal({
                title: 'Senha Alterada com sucesso!',
                text: 'Faça o login no Jobbe com sua nova senha.',
                type: 'success',
                showCancelButton: false,
                confirmButtonColor: '#1ea8e7',
                confirmButtonText: 'Yes!'
            }).then(() => {
                window.location.replace(RotaWeb + "Sign/Sign");

            });
        }

        function errorPasswordConfirmation() {
            swal({
                title: 'Link de reativação enviado!',
                text: 'Foi enviado ao seu e-mail um link para que você possa fazer a reativação da sua senha.',
                type: 'success',
                showCancelButton: false,
                confirmButtonColor: '#1ea8e7',
                confirmButtonText: 'Yes!'
            }).then(() => {
                window.location.replace(RotaWeb + "Sign/Sign");

            });
        }

    </script>
    <!-- Theme Settings & Niches Buttons End -->
    <!-- Vendor Scripts Start -->
    <script src="../js/vendor/jquery-3.5.1.min.js"></script>
    <script src="../js/vendor/bootstrap.bundle.min.js"></script>
    <script src="../js/vendor/OverlayScrollbars.min.js"></script>
    <script src="../js/vendor/autoComplete.min.js"></script>
    <script src="../js/vendor/clamp.min.js"></script>
    <script src="../js/vendor/jquery.validate/jquery.validate.min.js"></script>
    <script src="../js/vendor/jquery.validate/additional-methods.min.js"></script>
    <!-- Vendor Scripts End -->
    <!-- Template Base Scripts Start -->
    <script src="../font/CS-Line/csicons.min.js"></script>
    <script src="../js/base/helpers.js"></script>
    <script src="../js/base/globals.js"></script>
    <script src="../js/base/nav.js"></script>
    <script src="../js/base/search.js"></script>
    <script src="../js/base/settings.js"></script>
    <script src="../js/base/init.js"></script>
    <!-- Template Base Scripts End -->
    <!-- Page Specific Scripts Start -->
    <script src="../js/pages/auth.login.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/scripts.js"></script>
    <!-- Page Specific Scripts End -->
</body>
</html>

